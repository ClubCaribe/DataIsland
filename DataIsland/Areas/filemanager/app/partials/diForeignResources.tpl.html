<section >
    <nav role="navigation" class="navbar navbar-default">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
            <button data-target="#bs-example-navbar-collapse-2" data-toggle="collapse" class="navbar-toggle" type="button">
                <span class="sr-only">[tr]Toggle navigation[/tr]</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a href="#" class="navbar-brand">{{resourceName}}</a>
        </div>

        <!-- Collect the nav links, forms, and other content for toggling -->
        <div id="bs-example-navbar-collapse-2" class="collapse navbar-collapse">
            <ul class="nav navbar-nav">
                <li>
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                        <i class="entypo-doc"></i>
                        [tr]Files[/tr]
                        <b class="caret"></b>
                    </a>
                    <ul class="dropdown-menu">
                        <li>
                            <a href="#" ng-click="openUploadContainer()"><i class="entypo-upload"></i>[tr]Upload Files[/tr]</a>
                        </li>
                        <li>
                            <a href="#" ng-click="downloadSelectedFiles()"><i class="entypo-archive"></i>[tr]Compress Selected Items[/tr]</a>
                        </li>
                        <li class="divider"></li>
                        <li>
                            <a href="#" data-toggle="modal" data-target="#newdirectorydialog" ng-click="initNewDirectoryDialog()"><i class="entypo-folder"></i>[tr]Create Directory[/tr]</a>
                        </li>
                        <li>
                            <a href="#" ng-click="deleteSelectedItems()"><i class="entypo-trash"></i>[tr]Delete Selected Items[/tr]</a>
                        </li>
                    </ul>
                </li>
                <li>
                    <a href="#" ng-click="ToggleSelection()"><i class="entypo-check"></i>[tr]Select/Unselect All[/tr]</a>
                </li>
            </ul>

            <ul class="nav navbar-nav navbar-right">
                <li class="navbar-form">
                    <div data-toggle="buttons" class="btn-group">
                        <label class="btn btn-white" ng-click="changeMode('listMode')" ng-class="{'active':viewModeSelected=='listMode'}">
                            <input type="radio" ng-checked="viewModeSelected=='listMode'" id="listmodeRadioButton" name="viewMode"><i class="glyphicon glyphicon-list"></i>
                        </label>
                        <label class="btn btn-white" ng-click="changeMode('iconMode')" ng-class="{'active':viewModeSelected=='iconMode'}">
                            <input type="radio" ng-checked="viewModeSelected=='iconMode'" id="iconviewRadioButton" name="viewMode"><i class="glyphicon glyphicon-th"></i>
                        </label>

                    </div>
                </li>
            </ul>
        </div>
        <!-- /.navbar-collapse -->
    </nav>

    <!--uploader-->
    <div class="row" ng-if="WriteAccess==true">
        <div class="col-md-12">

            <div id="uploadContainer" data-collapsed="0" class="panel panel-invert panel-collapse">

                <!-- panel head -->
                <div class="panel-heading">
                    <div class="panel-title">[tr]Upload Files[/tr]</div>

                    <div class="panel-options">
                        <a data-rel="collapse" href="#"><i class="entypo-down-open"></i></a>
                    </div>
                </div>

                <!-- panel body -->
                <div class="panel-body" style="display: none;">

                    <pl-upload-component file-upload-url="uploader.fileUploadUrl" max-file-size="uploader.maxUpoadUrl" chunk-size="uploader.chunkSize" flash-swf-url="uploader.flashSwfUrl" silverlight-xap-url="uploader.silverlightXapUrl" on-file-uploaded="fileUploaded(file)" on-upload-completed="fileUploadCompleted(files)"></pl-upload-component>

                </div>

            </div>

        </div>
    </div>

    <!--breadcrumbs-->
    <ol class="breadcrumb">
        <li>
            <a href="#" ng-click="upDirectory()">
                <i class="entypo-back"></i>
            </a>
        </li>
        <li>
            <a href="#" ng-click="changeDirectory(0)">
                <i class="entypo-folder"></i>
            </a>
        </li>
        <li ng-repeat="breadCrumb in breadCrumbs()">
            <a href="#" ng-click="changeDirectory($index+1)" ng-if="!$last">
                <i ng-class="{'active':$last}"></i>
                {{breadCrumb}}
            </a>
            <span ng-if="$last">{{breadCrumb}}</span>
        </li>
        
        <div style="float:right;">[tr]Total files[/tr]: {{directorySummary.TotalNumFiles}},  [tr]Total Size[/tr]: {{directorySummary.TotalSize | bytes}}</div>
    </ol>

    <!--filelist icon view-->
    <div id="diForeignResourcesBrowserfilesListIconMode" class="gallery-env" ng-if="viewModeSelected=='iconMode' && viewMode=='list'">
        <div class="row">
            <div class="col-sm-2" ng-repeat="entry in filteredDirectoryData" ng-mouseenter="hover(entry)" ng-mouseleave="hover(entry)">
                <article class="album">
                    <header>
                        <a ng-click="itemClicked(entry)" style="cursor:pointer;" ng-if="entry.IsDirectory">
                            <img ng-src="/filemanager/foreignresources/thumbnail/{{userId.EscapeUserId()}}/{{resourceId.EscapeUserId()}}/400{{directory}}/{{entry.Name}}" />
                        </a>
                        <a style="cursor:pointer;" ng-if="!entry.IsDirectory" ng-click="SwitchToDetailsView($index)">
                            <img id="diForeignResourcesBrowsericonFilePreview" ng-src="/filemanager/foreignresources/thumbnail/{{userId.EscapeUserId()}}/{{resourceId.EscapeUserId()}}/400{{directory}}/{{entry.Name}}" />
                        </a>
                        <div ng-if="entry.IsShared" style="position:absolute;top:3px;left:3px; border-radius: 50%; background:#ffffff; box-shadow: 0 0 0 2px #f5f5f6;" class="entypo-share"></div>
                        <a class="album-options" href="#" ng-if="!entry.IsDirectory" ng-href="/filemanager/file/get/{{entry.FullName}}">
                            <i class="entypo-download"></i>
                            [tr]Download[/tr]
                        </a>
                    </header>

                    <section class="album-info" style="height:30px; overflow:hidden;">
                        {{entry.Name}}
                    </section>
                    <footer>
                        <div class="album-images-count" style="height:30px; overflow:hidden;">
                            {{entry.Size | bytes}}
                        </div>

                        <div class="album-options">
                            <input type="checkbox" id="diForeignResourcesBrowserchk-1" ng-model="entry.Checked">
                        </div>
                    </footer>
                </article>
            </div>
        </div>
    </div>

    <!--filelist listview-->
    <form name="fileslist">
        <div class="dataTables_wrapper form-inline" role="grid" ng-if="viewModeSelected=='listMode' && viewMode=='list'">
            <table class="table table-hover">
                <thead>
                    <tr role="row">
                        <td role="columnheader" style="width:31px;" class="sorting_disabled"></td>
                        <td role="columnheader" style="width:30px;" class="sorting"></td>
                        <td ng-click="changeSortOrder('Name')" role="columnheader" ng-class="{'sorting_asc':sortField=='Name'&&!sortIsDescending,'sorting_desc':sortField=='Name'&&sortIsDescending}">
                            [tr]Name[/tr]
                        </td>
                        <td ng-click="changeSortOrder('Size')" role="columnheader" style="width:100px;" ng-class="{'sorting_asc':sortField=='Size'&&!sortIsDescending,'sorting_desc':sortField=='Size'&&sortIsDescending}">
                            [tr]Size[/tr]
                        </td>
                    </tr>
                </thead>
                <tbody role="alert">
                    <tr ng-class-odd="'odd'" ng-class-even="'even'" ng-class="{'highlight':entry.Checked}" ng-repeat="entry in filteredDirectoryData" style="cursor:pointer;">
                        <td>
                            <input type="checkbox" id="chk-1" ng-model="entry.Checked">
                        </td>
                        <td ng-click="itemClicked(entry)" ng-if="entry.IsDirectory">
                            <div style="position:relative;">
                                <img ng-src="/filemanager/foreignresources/thumbnail/{{userId.EscapeUserId()}}/{{resourceId.EscapeUserId()}}/30{{directory}}/{{entry.Name}}" style="width:30px; height:30px;" />
                                <div ng-if="entry.IsShared" style="position:absolute;top:-5px;left:-5px; border-radius: 50%; background:#ffffff; box-shadow: 0 0 0 2px #f5f5f6;" class="entypo-share"></div>
                            </div>
                        </td>
                        <td ng-if="entry.IsDirectory" ng-mouseenter="hover(entry,true)" ng-mouseleave="hover(entry,false)">
                            <div style="display:inline-block; height:29px; line-height:29px;" ng-if="!entry.isInRenameMode" ng-click="itemClicked(entry)">{{entry.Name}}</div>
                            <div style="display:inline-block; height:29px; line-height:29px;" ng-if="entry.isInRenameMode"><input type="text" ng-model="entry.NewName"></div>
                            <div style="float:right">
                                <a class="btn btn-green btn-icon" ng-if="entry.isMouseOver && entry.isInRenameMode" ng-click="RenameFile(entry)">
                                    [tr]Rename[/tr]
                                    <i class="entypo-check"></i>
                                </a>
                                <a class="btn btn-red btn-icon" ng-if="entry.isMouseOver && entry.isInRenameMode" ng-click="CancelRename(entry)">
                                    [tr]Cancel[/tr]
                                    <i class="entypo-cancel"></i>
                                </a>
                                <a class="btn btn-gold btn-icon" ng-if="entry.isMouseOver && !entry.isInRenameMode" ng-click="SwitchToRenameMode(entry)">
                                    [tr]Rename[/tr]
                                    <i class="entypo-pencil"></i>
                                </a>
                            </div>
                        </td>
                        <td ng-if="!entry.IsDirectory" ng-mouseenter="hover(entry,true)" ng-mouseleave="hover(entry,false)">
                            <div style="position:relative;">
                                <a ng-click="SwitchToDetailsView($index)">
                                    <img id="diForeignResourcesBrowserlistFilePreview{{$index}}" ng-src="/filemanager/foreignresources/thumbnail/{{userId.EscapeUserId()}}/{{resourceId.EscapeUserId()}}/30{{directory}}/{{entry.Name}}" style="width:30px; height:30px; border:0px none transparent;" />
                                </a>
                                <div ng-if="entry.IsShared" style="position:absolute;top:-5px;left:-5px; border-radius: 50%; background:#ffffff; box-shadow: 0 0 0 2px #f5f5f6;" class="entypo-share"></div>
                            </div>
                        </td>
                        <td ng-if="!entry.IsDirectory" ng-mouseenter="hover(entry,true)" ng-mouseleave="hover(entry,false)">
                            <div style="display:inline-block; height:29px; line-height:29px;" ng-if="!entry.isInRenameMode"><a ng-click="SwitchToDetailsView($index)">{{entry.Name}}</a></div>
                            <div style="display:inline-block; height:29px; line-height:29px;" ng-if="entry.isInRenameMode"><input type="text" ng-model="entry.NewName"></div>
                            <div style="float:right">
                                <a class="btn btn-green btn-icon" ng-if="entry.isMouseOver && entry.isInRenameMode" ng-click="RenameFile(entry)">
                                    [tr]Rename[/tr]
                                    <i class="entypo-check"></i>
                                </a>
                                <a class="btn btn-red btn-icon" ng-if="entry.isMouseOver && entry.isInRenameMode" ng-click="CancelRename(entry)">
                                    [tr]Cancel[/tr]
                                    <i class="entypo-cancel"></i>
                                </a>
                                <a class="btn btn-gold btn-icon" ng-if="entry.isMouseOver && !entry.isInRenameMode" ng-click="SwitchToRenameMode(entry)">
                                    [tr]Rename[/tr]
                                    <i class="entypo-pencil"></i>
                                </a>
                                <a class="btn btn-green btn-icon" ng-if="entry.isMouseOver" ng-href="/filemanager/file/get/{{entry.FullName}}">
                                    [tr]Download[/tr]
                                    <i class="entypo-download"></i>
                                </a>
                            </div>
                        </td>
                        <td class="">{{entry.Size | bytes}}</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </form>

    <!--Details view-->
    <form name="detailsform">
        <div class="row" id="diForeignResourcesBrowserdetailsViewContainer" ng-if="viewMode=='details'" ng-class="{'details-view-fixed':detailsView.isDetailsViewExpanded}">
            <div class="col-sm-12" id="diForeignResourcesBrowserdetailsViewMenu">
                <nav role="navigation" class="navbar navbar-default">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button data-target="#bs-example-navbar-collapse-1" data-toggle="collapse" class="navbar-toggle" type="button">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand">{{SelectedFileIndex+1}} [tr]of[/tr] {{filteredDirectoryData.length}}</a>
                    </div>

                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div id="diForeignResourcesBrowserbs-example-navbar-collapse-1" class="collapse navbar-collapse">
                        <ul class="nav navbar-nav">
                            <li ng-if="SelectedFileIndex>0">
                                <a href="#" ng-click="MovePreviousItemIndex()"><i class="entypo-left-open-big"></i>[tr]Previous[/tr]</a>
                            </li>
                        </ul>

                        <ul class="nav navbar-nav navbar-right">
                            <li class="dropdown">
                                <a data-toggle="dropdown" class="dropdown-toggle" href="#">[tr]Actions[/tr]<b class="caret"></b></a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href="#" ng-click="RotateFlipPreview('Rotate270NoFlip')"><i class="fa fa-rotate-left" style="margin-right:5px;"></i>[tr]Rotate Left[/tr]</a>
                                    </li>
                                    <li>
                                        <a href="#" ng-click="RotateFlipPreview('Rotate90NoFlip')"><i class="fa fa-rotate-right" style="margin-right:5px;"></i>[tr]Rotate Right[/tr]</a>
                                    </li>
                                    <li ng-if="!filteredDirectoryData[SelectedFileIndex].IsDirectory">
                                        <a ng-href="/filemanager/file/get/{{filteredDirectoryData[SelectedFileIndex].FullName}}"><i class="entypo-download" style="margin-right:5px;"></i>[tr]Download[/tr]</a>
                                    </li>
                                </ul>
                            </li>

                            <li ng-if="SelectedFileIndex<filteredDirectoryData.length-1">
                                <a href="#" ng-click="MoveNextItemIndex()"><i class="entypo-right-open-big"></i>[tr]Next[/tr]</a>
                            </li>
                            <li>
                                <a href="#" ng-click="toggleDetailsViewExpandedMode()">
                                    <span ng-if="!detailsView.isDetailsViewExpanded"><i class="fa fa-expand" style="margin-right:5px;"></i>[tr]Expand[/tr]</span>
                                    <span ng-if="detailsView.isDetailsViewExpanded"><i class="fa fa-compress" style="margin-right:5px;"></i>[tr]Shrink[/tr]</span>
                                </a>
                            </li>
                            <li>
                                <a href="#" ng-click="SwitchToListView()"><i class="entypo-cancel"></i>[tr]Close[/tr]</a>
                            </li>
                        </ul>
                    </div>
                    <!-- /.navbar-collapse -->
                </nav>
            </div>
            <div class="col-sm-12" style="text-align:center;">
                <h2 id="diForeignResourcesBrowserdetailsViewFileName"><small>{{filteredDirectoryData[SelectedFileIndex].Name}}</small></h2>
                <div class="details-view-image-container">
                    <img src="/Content/panel/images/loader-1.gif" class="fade" id="diForeignResourcesBrowserimageloader" style="margin: auto; position: absolute; left: 50%; top: 50%;" />
                    <img ng-if="!detailsView.isDetailsViewExpanded" id="diForeignResourcesBrowserdetailsImagePreview" img-preload img-loader="imageloader" style="margin:auto; max-width:100%;" class="fade" ng-src="/filemanager/foreignresources/preview/{{userId.EscapeUserId()}}/{{resourceId.EscapeUserId()}}/1000{{directory}}/{{filteredDirectoryData[SelectedFileIndex].Name}}" />
                    <img ng-if="detailsView.isDetailsViewExpanded" id="diForeignResourcesBrowserdetailsImagePreviewExpanded" img-preload img-loader="imageloader" style="margin:auto; max-width:100%;" class="fade" ng-src="/filemanager/foreignresources/previewcustomsize/{{userId.EscapeUserId()}}/{{resourceId.EscapeUserId()}}/{{detailsView.imageContainerWidth}}/{{detailsView.imageContainerHeight}}{{directory}}/{{filteredDirectoryData[SelectedFileIndex].Name}}" />
                </div>
                <h3 id="diForeignResourcesBrowserdetailsViewFileDescription"><small>[tr]Size[/tr]: {{filteredDirectoryData[SelectedFileIndex].Size | bytes}}, [tr]Modified[/tr]: {{filteredDirectoryData[SelectedFileIndex].FileSystemObject.LastWriteTime | date:'medium'}}</small></h3>
            </div>
        </div>
    </form>

</section>
